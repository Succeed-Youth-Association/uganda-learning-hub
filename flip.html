

<!DOCTYPE html>

<html>
<head>
<!-- Add these lines to include Bootstrap CSS and JavaScript -->
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet"/>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
<meta content="Welcome To Fresh Teacher's Library, one stop center for academic needs of Ugandan schools. Our core mandate is to apply creativity and come up with innovative solutions in Ugandas' education sector." name="description"/>
<meta content="Fresh Teacher's Library, www.freshteacheruganda.com, Schemes Of Work, Lesson Plans, Lesson Notes, Topical Questions, Luganda Translated Movies, Past Papers" name="keyword"/>
<meta content="Fresh Teacher" name="author"/>
<link href="logo.jpg" rel="icon" sizes="16x16" type="image/png"/>
<link href="/manifest.json" rel="manifest"/>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
<meta content="Fresh Teacher's Library" property="og:site_name"/>
<meta content="https://2.bp.blogspot.com/-IEabwvLwNVY/XnccoVSvUgI/AAAAAAAAFro/mQPkBepUZpcNo1WG8trICTTg7unzwwXSgCK4BGAYYCw/s1600/SquareFit_20200322_064134.jpg" property="og:image"/>
<title>Top All Lesson Notes</title>

</meta></head>
<body>
<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top shadow-sm">
<a class="navbar-brand" href="index.html">
<div class="navbar-brand-content">
<a href="index.html">
<button class="btn btn-danger animated-btn"><strong>â†© RETURN TO LIBRARY ðŸ“š</strong></button>
</a> </div>
</a>
</nav><br/>
<body>
<div class="container">
<br/><br/>
<div class="row">
<div class="col-md-12 mb-3">
<input class="form-control" id="searchInput" placeholder="ðŸ” Type a keyword here to search..." type="text"/>
</div>
</div>
<div class="row" id="cardsContainer"></div>
<div class="spinner">
<div class="spinner-border text-primary" role="status">
<span class="sr-only">Loading...</span>
</div>
</div>
<p class="text-center" id="noMoreResults"></p>
</div>
<!-- AJAX -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"></script>
<!-- Costume CSS -->
<link href="css/flipbook.style.css" rel="stylesheet" type="text/css"/>
<link href="css/font-awesome.css" rel="stylesheet" type="text/css">
<link href="css/footer.css" rel="stylesheet" type="text/css"/>
<!-- Bootstrap CSS -->
<link crossorigin="anonymous" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" rel="stylesheet"/>
<link crossorigin="anonymous" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" rel="stylesheet"/>
<!-- Include JS -->
<script src="js/flipbook.min.js"></script>
<script>
    const itemsPerPage = 12;
    let currentPage = 1;
    let allData = [];
    let filteredData = [];
    let isLoading = false;

    $(document).ready(function() {
        fetchData();

        $('#searchInput').on('keyup', function() {
            const query = $(this).val().toLowerCase();
            filterData(query);
        });

        $(window).scroll(function() {
            if ($(window).scrollTop() + $(window).height() >= $(document).height() - 100) {
                if (!isLoading && (currentPage - 1) * itemsPerPage < filteredData.length) {
                    loadMoreData();
                } else if ((currentPage - 1) * itemsPerPage >= filteredData.length) {
                    $('#noMoreResults').text('NO MORE ITEMS TO DISPLAY!');
                }
            }
        });
    });

    function fetchData() {
        $.getJSON('public/data/middle/holiday-packages/holiday-packages.json', function(data) {
            allData = data;
            filteredData = data; // Initially, filtered data is the same as all data
            renderData();
        });
    }

    function filterData(query) {
        filteredData = allData.filter(item => {
            const title = item.pdfUrl.substring(item.pdfUrl.lastIndexOf("/") + 1).replace(".pdf", "").toLowerCase();
            return title.includes(query);
        });
        currentPage = 1; // Reset to first page
        $('#cardsContainer').empty(); // Clear previous results
        renderData();
    }

    function renderData() {
        const startIndex = (currentPage - 1) * itemsPerPage;
        const endIndex = currentPage * itemsPerPage;
        const currentData = filteredData.slice(startIndex, endIndex);

        if (currentData.length === 0 && currentPage === 1) {
            if (!$('#cardsContainer').html().includes('No matching results found!')) {
                $('#cardsContainer').html(`
                    <div class="col-12 text-center">
                        <p>No matching results found! Try again using another keyword...</p>
                        <img src="results.gif" alt="No results found" style="max-width: 200px; margin-bottom: 20px;">

                    </div>
                `);
            }
        } else {
            currentData.forEach((item, index) => {
                const pdfId = "read" + (startIndex + index + 1);
                const pdfUrl = item.pdfUrl;
                const fileName = pdfUrl.substring(pdfUrl.lastIndexOf("/") + 1).replace(".pdf", "");
                const title = fileName.toUpperCase();
                const description = item.description;

                $('#cardsContainer').append(`
                    <div class="col-md-4 mb-3">
                        <div class="card">
                            <div class="card-body">
                                <h3>${title}</h3>
                                <p class="description">${description}</p>
                                <p>Price: <span class="price"><del>${item.price}</del></span> <span class="free-text">FREE</span></p>
                                <div class="button">
                                    <a id="${pdfId}" class="btn btn-primary mt-2 mr-2 text-white">View File <i class="fas fa-book-reader fa-lg"></i></a>
                                    <a href="${pdfUrl}" class="btn btn-info mt-2 text-white" download>Download File <i class="fas fa-download fa-lg"></i></a>
                                </div>
                            </div>
                        </div>
                    </div>
                `);

                $("#" + pdfId).flipBook({
                    pdfUrl: item.pdfUrl,
                    lightBox: true,
                    layout: 3,
                    currentPage: {
                        vAlign: "bottom",
                        hAlign: "left"
                    },
                    btnShare: {
                        enabled: false
                    },
                    btnPrint: {
                        enabled: true
                    },
                    btnDownloadPages: {
                        enabled: true
                    },
                    btnColor: 'rgb(255,120,60)',
                    sideBtnColor: 'rgb(255,120,60)',
                    sideBtnSize: 60,
                    sideBtnBackground: "rgba(0,0,0,.7)",
                    sideBtnRadius: 60,
                    btnSound: {
                        vAlign: "top",
                        hAlign: "left"
                    },
                    btnAutoplay: {
                        vAlign: "top",
                        hAlign: "left"
                    },
                });
            });

            if (currentData.length < itemsPerPage && currentPage === 1) {
                $('#noMoreResults').text('NO MORE RESULTS FOUND!');
            }
        }
    }

    function loadMoreData() {
        if (isLoading) return;
        isLoading = true;
        $('.spinner').show();
        setTimeout(() => {
            currentPage++;
            renderData();
            isLoading = false;
            $('.spinner').hide();
        }, 1000);
    }
</script>
</body></html>
